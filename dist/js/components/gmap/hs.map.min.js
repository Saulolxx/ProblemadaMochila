!function(e){"use strict";e.HSCore.components.HSGMap={_baseConfig:{zoom:14,scrollwheel:!1},pageCollection:e(),init:function(t,o){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=o&&e.isPlainObject(o)?e.extend({},this._baseConfig,o):this._baseConfig,this.config.itemSelector=t,this.initGMap(),this.pageCollection},initGMap:function(){var t=this.config,o=this.pageCollection;this.collection.each(function(a,l){var n,s=e(l),i=s.attr("id"),r=s.data("type"),c=s.data("lat"),d=s.data("lng"),g=s.data("zoom"),p=s.data("title"),u=JSON.parse(l.getAttribute("data-styles")),m=[],f=Boolean(s.data("polygon")),y=JSON.parse(l.getAttribute("data-polygon-cords")),h=JSON.parse(l.getAttribute("data-polygon-styles")),w=Boolean(s.data("polylines")),k=JSON.parse(l.getAttribute("data-polylines-cords")),M=JSON.parse(l.getAttribute("data-polylines-styles")),C=Boolean(s.data("routes")),v=JSON.parse(l.getAttribute("data-routes-cords")),O=JSON.parse(l.getAttribute("data-routes-styles")),z=Boolean(s.data("geolocation")),b=Boolean(s.data("geocoding")),S=s.data("cords-target"),I=Boolean(s.data("pin")),T=s.data("pin-icon"),A=Boolean(s.data("multiple-markers")),B=JSON.parse(l.getAttribute("data-markers-locations"));if("satellite"==r)(n=new google.maps.Map(document.getElementById(i),{zoom:g||t.zoom,scrollwheel:t.scrollwheel})).setCenter({lat:c,lng:d}),n.setMapTypeId(google.maps.MapTypeId.SATELLITE);else if("terrain"==r)(n=new google.maps.Map(document.getElementById(i),{zoom:g||t.zoom,scrollwheel:t.scrollwheel})).setCenter({lat:c,lng:d}),n.setMapTypeId(google.maps.MapTypeId.TERRAIN);else if("street-view"==r)(n=new google.maps.StreetViewPanorama(document.getElementById(i),{zoom:g||t.zoom,scrollwheel:t.scrollwheel})).setPosition({lat:c,lng:d});else if("static"==r)e(document).ready(function(){n=GMaps.staticMapURL({size:[2048,2048],lat:c,lng:d,zoom:g||t.zoom}),e("#"+i).css("background-image","url("+n+")")});else if("custom"==r){var G=u.length;for(a=0;a<G;a++){var N=u[a][0],J=u[a][1],L=u[a][2],W=e.extend({},m[a]);""!=N&&(W.featureType=N),""!=J&&(W.elementType=J),W.stylers=L,m.push(W)}n=new GMaps({div:"#"+i,lat:c,lng:d,zoom:g||t.zoom,scrollwheel:t.scrollwheel,styles:m}),I&&n.addMarker({lat:c,lng:d,title:p,icon:T})}else n=new GMaps({div:"#"+i,lat:c,lng:d,zoom:g||t.zoom,scrollwheel:t.scrollwheel}),I&&n.addMarker({lat:c,lng:d,title:p,icon:T});if(I&&"satellite"==r||"terrain"==r||"street-view"==r){var E=new google.maps.Marker({position:{lat:c,lng:d},map:n});if(T){var P=new google.maps.MarkerImage(T);E.setIcon(P)}p&&E.setOptions({title:p})}if(1==A){var R,_,D=new google.maps.InfoWindow;for(_=0;_<B.length;_++)R=new google.maps.Marker({position:new google.maps.LatLng(B[_][1],B[_][2]),map:n}),google.maps.event.addListener(R,"click",function(e,t){return function(){D.setContent(B[t][0]),D.open(n,e)}}(R,_))}z||google.maps.event.addDomListener(window,"resize",function(){setTimeout(function(){n.setCenter({lat:c,lng:d})},100)}),f&&e(document).ready(function(){n.drawPolygon({paths:y,strokeColor:h.strokeColor,strokeOpacity:h.strokeOpacity,strokeWeight:h.strokeWeight,fillColor:h.fillColor,fillOpacity:h.fillOpacity})}),w&&e(document).ready(function(){n.drawPolyline({path:k,strokeColor:M.strokeColor,strokeOpacity:M.strokeOpacity,strokeWeight:M.strokeWeight})}),C&&e(document).ready(function(){n.drawRoute({origin:v[0],destination:v[1],travelMode:O.travelMode,strokeColor:O.strokeColor,strokeOpacity:O.strokeOpacity,strokeWeight:O.strokeWeight})}),z&&GMaps.geolocate({success:function(e){n.setCenter({lat:e.coords.latitude,lng:e.coords.longitude}),n.addMarker({lat:e.coords.latitude,lng:e.coords.longitude,title:p,icon:T}),google.maps.event.addDomListener(window,"resize",function(){setTimeout(function(){n.setCenter({lat:e.coords.latitude,lng:e.coords.longitude})},100)})},error:function(e){alert("Geolocation failed: "+e.message)},not_supported:function(){alert("Your browser does not support geolocation")}}),b&&e(document).ready(function(){var t=e(S).closest("form");e(t).submit(function(t){t.preventDefault(),GMaps.geocode({address:e(S).val().trim(),callback:function(e,t){if("OK"==t){var o=e[0].geometry.location;n.setCenter(o.lat(),o.lng()),n.addMarker({lat:o.lat(),lng:o.lng()}),c=o.lat(),d=o.lng()}}})})}),o=o.add(s)})}}}(jQuery);