!function(e){"use strict";e.HSCore.components.HSProgressBar={_baseConfig:{bounds:-100,debounce:10,time:1e3,fps:60,rtl:!1,direction:"horizontal",useProgressElement:!1,indicatorSelector:"progress-bar-indicator",moveElementSelector:!1,moveElementTo:"currentPosition",onChange:function(e){},beforeUpdate:function(){},afterUpdate:function(){},onMoveElementChange:function(e){},beforeMoveElementUpdate:function(){},afterMoveElementUpdate:function(){}},_pageCollection:e(),init:function(t,n){if(t&&e(t).length)return this.extendHorizontalProgressBar(),this.extendVerticalProgressBar(),this._initProgressBar(t,n&&e.isPlainObject(n)?e.extend(!0,{},this._baseConfig,n):this._baseConfig)},_initProgressBar:function(t,n){var o=this,i=e();return appear({bounds:n.bounds,debounce:n.debounce,init:function(){e(t).each(function(t,r){var a=e(r);"horizontal"===n.direction?a.data("ProgressBar",new o.HorizontalProgressBar(a,n)):a.data("ProgressBar",new o.VerticalProgressBar(a,n)),i=i.add(a),o._pageCollection=o._pageCollection.add(a)})},elements:function(){return document.querySelectorAll(t)},appear:function(t){e(t).data("ProgressBar").update(e(t).data("value"))}}),i},HorizontalProgressBar:function(t,n){this.element=t,this.indicator=this.element.find(n.indicatorSelector),this.config=n,this.moveElement=n.moveElementSelector?t.parent().find(n.moveElementSelector):e(),this.moveElement.length&&(n.rtl?this.moveElement.css({left:"auto",right:0,"margin-right":this.moveElement.outerWidth()/-2}):this.moveElement.css({left:0,"margin-left":this.moveElement.outerWidth()/-2})),this.config.useProgressElement?(this.element.data("value",this.element.attr("value")),this.element.attr("value",0)):(this.element.data("value",this.indicator.length?Math.round(this.indicator.outerWidth()/this.element.outerWidth()*100):0),this.indicator.css("width","0%"))},VerticalProgressBar:function(e,t){this.element=e,this.config=t,this.indicator=e.find(t.indicatorSelector),this.indicator.length&&(e.data("value",parseInt(this.indicator.css("height"),10)/this.indicator.parent().outerHeight()*100),this.indicator.css("height",0))},extendHorizontalProgressBar:function(){this.HorizontalProgressBar.prototype.update=function(e){var t=this;if(this.config.useProgressElement){var n=this.config.time/this.config.fps,o=parseInt(e/n,10),i=0;t=this;if(0==o&&(o=1),this.config.beforeUpdate.call(this.element),this.moveElement.length&&this.config.beforeMoveElementUpdate.call(this.moveElement),t.config.moveElementSelector&&"end"==t.config.moveElementTo){var r=0,a=parseInt(100/n,10);0==a&&(a=1);var l=setInterval(function(){t.moveSubElement(r+=a),t.moveElement.length&&t.config.onMoveElementChange.call(t.moveElement,r+=a),r>100&&(clearInterval(l),t.moveSubElement(100),t.moveElement.length&&t.config.afterMoveElementUpdate.call(t.moveElement))},n)}this.element.data("intervalId",setInterval(function(){var n=i+=o;t.element.attr("value",n),t.config.onChange.call(t.element,n),t.config.moveElementSelector&&"currentPosition"==t.config.moveElementTo&&t.moveSubElement(n),i>e&&(t.element.attr("value",e),t.config.moveElementSelector&&"currentPosition"==t.config.moveElementTo&&t.moveSubElement(e),clearInterval(t.element.data("intervalId")),t.config.afterUpdate.call(t.element))},n))}else this.indicator.length&&this.indicator.stop().animate({width:e+"%"},{duration:t.config.time,complete:function(){t.config.afterUpdate.call(t.element)}})},this.HorizontalProgressBar.prototype.moveSubElement=function(e,t){if(this.moveElement.length){this.moveElement.css(this.config.rtl?"right":"left",e+"%")}}},extendVerticalProgressBar:function(){this.VerticalProgressBar.prototype.update=function(e){this.indicator.stop().animate({height:e+"%"})}},get:function(){return this._pageCollection},getAPI:function(e){return this._pageCollection.eq(e).length?this._pageCollection.eq(e).data("ProgressBar"):null}}}(jQuery);