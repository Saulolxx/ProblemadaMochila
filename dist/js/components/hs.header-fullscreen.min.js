!function(e){"use strict";function t(t,n,i){var o=this;this.element=t,this.config=n,this.effect=i,this.overlay=e("<div></div>",{class:o.config.overlayClass}),Object.defineProperty(this,"isShown",{get:function(){return o.effect.isShown()}}),Object.defineProperty(this,"sections",{get:function(){return o.element.find(o.config.sectionsContainerSelector)}}),this.element.append(this.overlay),this.effect.init(this.element,this.overlay,this.config.afterOpen,this.config.afterClose),this._bindEvents(),e.HSCore.components.HSScrollBar&&this.sections.length&&e.HSCore.components.HSScrollBar.init(this.sections)}function n(){this._isShown=!1}e.HSCore.components.HSHeaderFullscreen={_baseConfig:{afterOpen:function(){},afterClose:function(){},overlayClass:"u-header__overlay",sectionsContainerSelector:".u-header__sections-container"},_pageCollection:e(),init:function(i,o){var s=this;return i&&(i=e(i)).length?(o=o&&e.isPlainObject(o)?o:{},this._bindGlobalEvents(),i.each(function(i,r){var a=e(this),h=e.extend(!0,{},s._baseConfig,o,a.data());a.data("HSHeaderFullscreen")||(a.data("HSHeaderFullscreen",new t(a,h,new n)),s._pageCollection=s._pageCollection.add(a))})):e()},_bindGlobalEvents:function(){var t=this;e(window).on("resize.HSHeaderFullscreen",function(){t.resizeTimeOutId&&clearTimeout(t.resizeTimeOutId),t.resizeTimeOutId=setTimeout(function(){t._pageCollection.each(function(t,n){var i=e(n).data("HSHeaderFullscreen");i&&i.update()})},50)}),e(document).on("keyup.HSHeaderFullscreen",function(n){n.keyCode&&27==n.keyCode&&t._pageCollection.each(function(t,n){var i=e(n).data("HSHeaderFullscreen");i&&i.hide()})})}},t.prototype._bindEvents=function(){var t=this;return this.invoker=e('[data-target="#'+this.element.attr("id")+'"]'),this.invoker.length&&this.invoker.off("click.HSHeaderFullscreen").on("click.HSHeaderFullscreen",function(e){t[t.isShown?"hide":"show"](),e.preventDefault()}),this},t.prototype.update=function(){return!!this.effect&&(this.effect.update(),this)},t.prototype.show=function(){return!!this.effect&&(this.effect.show(),this)},t.prototype.hide=function(){return!!this.effect&&(this.effect.hide(),this)},n.prototype.init=function(e,t,n,i){var o=this;return this.element=e,this.overlay=t,this.afterOpen=n,this.afterClose=i,this.overlay.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(e){o.isShown()&&"transform"==e.originalEvent.propertyName?o.afterOpen.call(o.element,o.overlay):o.isShown()||"transform"!=e.originalEvent.propertyName||o.afterClose.call(o.element,o.overlay),e.stopPropagation(),e.preventDefault()}),this.update(),this.overlay.addClass(this.element.data("overlay-classes")),this},n.prototype.destroy=function(){return this.overlay.css({width:"auto",height:"auto"}),this.element.removeClass("u-header--fullscreen-showed"),this},n.prototype.update=function(){var t=e(window),n=t.width(),i=t.height();return this.overlay.css({width:n>i?1.5*n:1.5*i,height:n>i?1.5*n:1.5*i}),this},n.prototype.show=function(){return this.element.addClass("u-header--fullscreen-showed"),this._isShown=!0,this},n.prototype.hide=function(){return this.element.removeClass("u-header--fullscreen-showed"),this._isShown=!1,this},n.prototype.isShown=function(){return this._isShown}}(jQuery);