!function(t){"use strict";function i(i,e){this.element=i,this.config=e,this._items=t(),this._makeItems(),this._bindEvents()}function e(i,e){var n=this;this.element=i,this.config=e,Object.defineProperty(this,"section",{value:t(n.element.attr("href"))}),Object.defineProperty(this,"offset",{get:function(){var i=t(".u-header"),e=getComputedStyle(i.get(0)),o=e.position,h=n.section.offset().top;return i.length&&"fixed"==o&&0==parseInt(e.top)&&(h=h-i.outerHeight()-parseInt(e.marginTop)),n.config.over.length&&(h-=n.config.over.outerHeight()),h}})}t.HSCore.components.HSScrollNav={_baseConfig:{duration:400,easing:"linear",over:t(),activeItemClass:"active",afterShow:function(){},beforeShow:function(){}},_pageCollection:t(),init:function(e,n){var o=this;return e&&e.length?(e.each(function(e,h){var a=t(h),c=n&&t.isPlainObject(n)?t.extend(!0,{},o._baseConfig,n,a.data()):t.extend(!0,{},o._baseConfig,a.data());a.data("HSScrollNav")||(a.data("HSScrollNav",new i(a,c)),o._pageCollection=o._pageCollection.add(a))}),t(window).on("scroll.HSScrollNav",function(){o._pageCollection.each(function(i,e){t(e).data("HSScrollNav").highlight()})}).trigger("scroll.HSScrollNav"),e):t()}},i.prototype._makeItems=function(){var i=this;this.element.find('a[href^="#"]').each(function(n,o){var h=t(o);h.data("HSScrollNavSection")||(h.data("HSScrollNavSection",new e(h,i.config)),i._items=i._items.add(h))})},i.prototype._bindEvents=function(){var i=this;this.element.on("click.HSScrollNav",'a[href^="#"]',function(e){i._lockHightlight=!0,i.current&&i.current.unhighlight(),this.blur(),i.current=t(this).data("HSScrollNavSection"),i.current.highlight(),t(this).data("HSScrollNavSection").show(function(){i._lockHightlight=!1}),e.preventDefault()})},i.prototype.highlight=function(){var i,e;if(this._items.length&&!this._lockHightlight){if((e=t(window).scrollTop())+t(window).height()===t(document).height())return this.current=this._items.last().data("HSScrollNavSection"),this.unhighlight(),this.current.highlight(),void this.current.changeHash();this._items.each(function(n,o){var h=t(o).data("HSScrollNavSection");h.section;e>h.offset&&(i=h)}),i&&this.current!=i&&(this.unhighlight(),i.highlight(),this.current&&i.changeHash(),this.current=i)}},i.prototype.unhighlight=function(){this._items.each(function(i,e){t(e).data("HSScrollNavSection").unhighlight()})},e.prototype.show=function(i){var e=this;this.section.length&&(e.config.beforeShow.call(e.section),this.changeHash(),t("html, body").stop().animate({scrollTop:e.offset+3},{duration:e.config.duration,easing:e.config.easing,complete:function(){t("html, body").stop().animate({scrollTop:e.offset+3},{duration:e.config.duration,easing:e.config.easing,complete:function(){e.config.afterShow.call(e.section),t.isFunction(i)&&i()}})}}))},e.prototype.changeHash=function(){this.section.attr("id",""),window.location.hash=this.element.attr("href"),this.section.attr("id",this.element.attr("href").slice(1))},e.prototype.highlight=function(){var t=this.element.parent("li");t.length&&t.addClass(this.config.activeItemClass)},e.prototype.unhighlight=function(){var t=this.element.parent("li");t.length&&t.removeClass(this.config.activeItemClass)}}(jQuery);